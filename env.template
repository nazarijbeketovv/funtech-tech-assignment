# --- App ---
APP_NAME="Order Service"
ENVIRONMENT=local
LOG_LEVEL=INFO
DEBUG=false
RATE_LIMIT_PER_MINUTE=30

# --- Database (required) ---
POSTGRES_USER=order_service_user
POSTGRES_PASSWORD=order_service_password
POSTGRES_DB=order_service
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432

# Alembic migrations override (optional).
# If set, it overrides the URL from alembic.ini.
DATABASE_URL=postgresql+asyncpg://order_service_user:order_service_password@localhost:5432/order_service

# --- Redis ---
REDIS_PASSWORD=redis_password
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# Used by the API for rate limiting and caching
REDIS_URL=redis://:redis_password@localhost:6379/0
REDIS_CACHE_TTL=300
REDIS_CACHE_PREFIX=order_service:

# --- RabbitMQ / Broker (required) ---
BROKER_URL=amqp://guest:guest@localhost:5672/
BROKER_NEW_ORDER_QUEUE=new_order
PUBLISH_RETRIES=3
PUBLISH_RETRY_BACKOFF=0.5

# --- Celery (optional; defaults to BROKER_URL/REDIS_URL if not set) ---
CELERY_BROKER_URL=amqp://guest:guest@localhost:5672/
CELERY_RESULT_BACKEND=redis://:redis_password@localhost:6379/0

# --- Auth / JWT (required) ---
# IMPORTANT: replace with a strong secret in real environments
JWT_SECRET_KEY=change_me_please
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# --- CORS ---
# pydantic-settings will parse JSON arrays from env vars
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PATCH","PUT","DELETE","OPTIONS"]
CORS_ALLOW_HEADERS=["*"]
